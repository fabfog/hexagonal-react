import { PubSub, EventHandlerBuilder } from "@dxbox/use-less-react/classes";
import type { HybridCommandBus, HybridEventBusInterface, QueryBus } from "@dxbox/use-less-react/classes";

/**
 * {{pascalCase name}}ViewModel for {{pascalCase name}} UI
 *
 * This is an **inbound adapter** that converts UI events into domain commands/queries.
 *
 * Responsibilities:
 * - Manages UI state
 * - Handles user actions
 * - Communicates with use-cases via command/query buses
 * - Notifies React components of state changes via PubSub
 *
 * Usage with @dxbox/use-less-react:
 * - Extends PubSub for reactive updates
 * - Consumed by React components via useReactiveInstance hook
 */
export class {{pascalCase name}}ViewModel extends PubSub {
  // TODO: Add state properties
  isLoading = false;
  error: string | null = null;

  constructor(
    private readonly commandBus: HybridCommandBus,
    private readonly queryBus: QueryBus,
    private readonly eventBus: HybridEventBusInterface
  ) {
    super();
    this.makeReactiveProperties("isLoading", "error");
  }

  subscribeToEvents() {
    return new EventHandlerBuilder(this.eventBus)
      // .on<EventClass>(EventClass.prototype.type, async (event) => {})
      .build();
  }

  // TODO: Add action methods
}
